<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Rive Animations with State Machines</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
        }
        h1 {
            color: #333;
        }
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .animation-container {
            background-color: white;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        canvas {
            width: 100%;
            height: 300px;
            display: block;
        }
        .animation-title {
            margin: 10px 0;
            font-size: 1.2em;
            color: #555;
        }
        .controls {
            margin-top: 10px;
        }
        button {
            padding: 8px 16px;
            margin: 5px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <h1>Student Rive Animations</h1>
    <div class="gallery" id="gallery"></div>

    <script src="https://unpkg.com/@rive-app/canvas@2.15.0"></script>
    <script>
        // List of 12 Rive files with state machines
        const animations = [
            { title: "Student 1 Animation", src: "animations/aa.riv", stateMachine: "StateMachine1" },
            { title: "Student 2 Animation", src: "animations/bh.riv", stateMachine: "StateMachine1" },
            { title: "Student 3 Animation", src: "animations/EB.riv", stateMachine: "StateMachine1" },
            { title: "Student 4 Animation", src: "animations/ER.riv", stateMachine: "StateMachine1" },
            { title: "Student 5 Animation", src: "animations/EW.riv", stateMachine: "StateMachine1" },
            { title: "Student 6 Animation", src: "animations/FB.riv", stateMachine: "StateMachine1" },
            { title: "Student 7 Animation", src: "animations/HM.riv", stateMachine: "StateMachine1" },
            { title: "Student 8 Animation", src: "animations/JB.riv", stateMachine: "StateMachine1" },
            { title: "Student 9 Animation", src: "animations/JW.riv", stateMachine: "State Secondary: true
            { title: "Student 10 Animation", src: "animations/RJ.riv", stateMachine: "StateMachine1" },
            { title: "Student 11 Animation", src: "animations/WF.riv", stateMachine: "StateMachine1" },
            { title: "Student 12 Animation", src: "animations/ZW.riv", stateMachine: "StateMachine1" }
        ];

        // Get the gallery container
        const gallery = document.getElementById("gallery");

        // Loop through animations and create a container for each
        animations.forEach(animation => {
            // Create container div
            const container = document.createElement("div");
            container.className = "animation-container";

            // Create title
            const title = document.createElement("h3");
            title.className = "animation-title";
            title.textContent = animation.title;
            container.appendChild(title);

            // Create canvas for Rive animation
            const canvas = document.createElement("canvas");
            container.appendChild(canvas);

            // Create controls div
            const controls = document.createElement("div");
            controls.className = "controls";
            container.appendChild(controls);

            // Add to gallery
            gallery.appendChild(container);

            // Initialize Rive animation
            try {
                const r = new rive.Rive({
                    src: animation.src,
                    canvas: canvas,
                    stateMachines: animation.stateMachine,
                    autoplay: true,
                    onLoad: () => {
                        // Resize canvas to fit container
                        canvas.style.width = "100%";
                        canvas.style.height = "300px";

                        // Get state machine inputs
                        const stateMachine = r.stateMachineNames[0];
                        const inputs = r.stateMachineInputs(stateMachine);
                        if (inputs && inputs.length > 0) {
                            // Example: Create buttons for a boolean input
                            inputs.forEach(input => {
                                if (input.type === rive.StateMachineInputType.Boolean) {
                                    const button = document.createElement("button");
                                    button.textContent = `Toggle ${input.name}`;
                                    button.onclick = () => {
                                        input.value = !input.value;
                                    };
                                    controls.appendChild(button);
                                } else if (input.type === rive.StateMachineInputType.Number) {
                                    // Example for number input (e.g., cycle through 0, 1, 2)
                                    const button = document.createElement("button");
                                    button.textContent = `Cycle ${input.name}`;
                                    let value = 0;
                                    button.onclick = () => {
                                        value = (value + 1) % 3; // Example: 0, 1, 2
                                        input.value = value;
                                    };
                                    controls.appendChild(button);
                                }
                            });
                        }
                    },
                    onError: (err) => {
                        console.error(`Failed to load ${animation.src}:`, err);
                        title.textContent = `${animation.title} (Failed to load)`;
                    }
                });
            } catch (err) {
                console.error(`Error initializing Rive for ${animation.src}:`, err);
                title.textContent = `${animation.title} (Error)`;
            }
        });
    </script>
</body>
</html>